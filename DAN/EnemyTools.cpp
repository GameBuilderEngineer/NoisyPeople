//===================================================================================================================================
//【EnemyTools.cpp】
// [作成者]HAL東京GP12A332 16 蔡 友剛
// [作成日]2019/09/20
// [更新日]2019/09/20
//===================================================================================================================================

//===================================================================================================================================
//【インクルード】
//===================================================================================================================================
#include "EnemyTools.h"

//===================================================================================================================================
//【コンストラクタ】
//===================================================================================================================================


//===================================================================================================================================
//【デストラクタ】
//===================================================================================================================================
ENEMY_TOOLS::~ENEMY_TOOLS()
{
	SAFE_DELETE_ARRAY(enemyFile.efmt);
}

//===================================================================================================================================
//【エネミーの種類を設定】
//===================================================================================================================================
void ENEMY_TOOLS::SetEnemyType(int enemyId, int enemyType)
{
	enemyFile.efmt[enemyId].type = enemyType;
}

//===================================================================================================================================
//【エネミーの位置を設定】
//===================================================================================================================================
void ENEMY_TOOLS::SetEnemyPos(int enemyId, const D3DXVECTOR3 pos)
{
	enemyFile.efmt[enemyId].posX = pos.x;
	enemyFile.efmt[enemyId].posY = pos.y;
	enemyFile.efmt[enemyId].posZ = pos.z;
}

//===================================================================================================================================
//【エネミーの回転Y軸を設定】
//===================================================================================================================================
void ENEMY_TOOLS::SetEnemyRotY(int enemyId, float rotY)
{
	enemyFile.efmt[enemyId].rotY = rotY;
}

//===================================================================================================================================
//【エネミーファイルの読み込み処理】
//===================================================================================================================================
ENEMY_FILE ENEMY_TOOLS::InputEnemyFile(void)
{
	FILE	*fp = NULL;					//ファイル
	fopen("enemy.enemy", "rb");

	ENEMY_FILE tmpEnemyFile;
	memset(&tmpEnemyFile, 0, sizeof(ENEMY_FILE));

	//ENMYの読み込み
	fread(&tmpEnemyFile.enmy, sizeof(ENEMY_ENMY), 1, fp);

	//メモリ確保
	tmpEnemyFile.efmt = new ENEMY_EFMT[tmpEnemyFile.enmy.enemyMax];

	//EFMTの読み込み
	fread(&tmpEnemyFile.efmt, sizeof(ENEMY_EFMT), tmpEnemyFile.enmy.enemyMax, fp);

	fclose(fp);

	return tmpEnemyFile;
}

//===================================================================================================================================
//【エネミーファイルの書き出し処理】
//===================================================================================================================================
void ENEMY_TOOLS::OutputEnemyFile(void)
{
	FILE	*fp = NULL;					//ファイル
	fopen("enemy.enemy", "wb");

	//ENEMY_FILEの書き出し
	fwrite(&enemyFile, sizeof(ENEMY_FILE), 1, fp);

	fclose(fp);
}

//===================================================================================================================================
//【エネミーのフォーマット構造体を追加】
//===================================================================================================================================
void ENEMY_TOOLS::AddEnemyFormat(void)
{

}