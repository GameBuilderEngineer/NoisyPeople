//===================================================================================================================================
//【Bullet.cpp】
// [作成者]HAL東京GP12A332 11 菅野 樹
// [作成日]2019/11/05
// [更新日]2019/11/08
//===================================================================================================================================

//===================================================================================================================================
//【インクルード】
//===================================================================================================================================
#include "Bullet.h"

//===================================================================================================================================
//【using宣言】
//===================================================================================================================================
using namespace bulletNS;

//////////////////////////////////////////////////////////////////////////////////////////////////////
// [バレットマネージャ]
//////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma region Bullet
//===================================================================================================================================
//【コンストラクタ】
//===================================================================================================================================
Bullet::Bullet(D3DXVECTOR3 start, D3DXVECTOR3 speed)
{
	this->launchPosition = start;
	this->speed = speed;
	D3DXVECTOR3 direction;
	Base::between2VectorDirection(&direction, start, start + speed);
	ballisticRay.initialize(launchPosition, direction);


}

//===================================================================================================================================
//【デストラクタ】
//===================================================================================================================================
Bullet::~Bullet()
{

}

//===================================================================================================================================
//【更新】
//===================================================================================================================================
void Bullet::update(float frameTime)
{

}

//===================================================================================================================================
//【衝突判定】
//===================================================================================================================================
void Bullet::collide()
{

}
#pragma endregion

//////////////////////////////////////////////////////////////////////////////////////////////////////
// [バレットマネージャ]
//////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma region BulletManager
//===================================================================================================================================
//【コンストラクタ：バレットマネージャー】
//===================================================================================================================================
BulletManager::BulletManager()
{
	bulletList = new LinkedList<Bullet*>;
}

//===================================================================================================================================
//【デストラクタ：バレットマネージャー】
//===================================================================================================================================
BulletManager::~BulletManager()
{
	bulletList->terminate();
	SAFE_DELETE(bulletList);
}

//===================================================================================================================================
//【更新：バレットマネージャー】
//===================================================================================================================================
void BulletManager::update(float frameTime)
{
	//bulletList->getValue()
}

//===================================================================================================================================
//【発射：バレットマネージャー】
//===================================================================================================================================
void BulletManager::launch(Ray shootingRay)
{
	
	D3DXVECTOR3 speed;
	speed = shootingRay.direction*BULLET_SPEED;
	bulletList->insertFront(new Bullet(shootingRay.start,speed));

}

#pragma endregion
